### Динамическое изменение формы (УФ)

> Вся работа идёт **в модуле формы**.
> Коллекции:
>
> * `Элементы` — визуальные узлы (Items)
> * `Команды` — действия формы (Commands)

---

## 1. Базовый конструктор

```1c
НовыйЭлемент = Элементы.Добавить(
    "ИмяЭлемента",           // уникально
    Тип("ТипЭлемента"),      // ГруппаФормы, ПолеФормы, …
    ЭлементРодитель          // Родитель или ЭтотОбъект (корень)
);
```

| ТипЭлемента      | Для чего                      |
| ---------------- | ----------------------------- |
| `ГруппаФормы`    | контейнеры, страницы, подменю |
| `ПолеФормы`      | ввод / вывод данных           |
| `ДекорацияФормы` | статический текст, картинки   |
| `КнопкаФормы`    | кнопки, команды, подменю      |
| `ТаблицаФормы`   | табличные части               |

---

## 2. Группы формы

```1c
// Обычная группа без рамки
Grp = Элементы.Добавить("GrpNoHeader", Тип("ГруппаФормы"), ЭтотОбъект);
Grp.Вид                = ВидГруппыФормы.ОбычнаяГруппа;
Grp.Отображение        = ОтображениеОбычнойГруппы.Нет;
Grp.ОтображатьЗаголовок = Ложь;
Grp.Группировка        = ГруппировкаПодчиненныхЭлементовФормы.ГоризонтальнаяВсегда;

// Обычная c заголовком
Hdr = Элементы.Добавить("Шапка", Тип("ГруппаФормы"), ЭтотОбъект);
Hdr.Вид        = ВидГруппыФормы.ОбычнаяГруппа;
Hdr.Заголовок  = "Основные реквизиты";
Hdr.Группировка = ГруппировкаПодчиненныхЭлементовФормы.Вертикальная;

// Страницы-закладки
Tabs = Элементы.Добавить("Pages", Тип("ГруппаФормы"), ЭтотОбъект);
Tabs.Вид               = ВидГруппыФормы.Страницы;
Tabs.ОтображениеСтраниц = ОтображениеСтраницФормы.ЗакладкиСверху;

// Отдельные страницы
PgТовары = Элементы.Добавить("PgТовары", Тип("ГруппаФормы"), Tabs);
PgТовары.Вид      = ВидГруппыФормы.Страница;
PgТовары.Заголовок = "Товары";
```

*`ВидГруппыФормы.Подменю` создаёт кнопку-подменю; её дочерние элементы — `КнопкаФормы`.*

---

## 3. Поля формы

```1c
// Поле ввода
FldНомер = Элементы.Добавить("Номер", Тип("ПолеФормы"), Grp);
FldНомер.Вид         = ВидПоляФормы.ПолеВвода;
FldНомер.ПутьКДанным = "Номер";

// Поле-надпись (read-only)
FldДата = Элементы.Добавить("Дата", Тип("ПолеФормы"), Grp);
FldДата.Вид         = ВидПоляФормы.ПолеНадписи;
FldДата.ПутьКДанным = "Дата";

// Поле-флажок + обработчик
FldПометка = Элементы.Добавить("ПометкаУдаления", Тип("ПолеФормы"), PgТовары);
FldПометка.Вид         = ВидПоляФормы.ПолеФлажка;
FldПометка.ПутьКДанным = "ПометкаУдаления";
FldПометка.УстановитьДействие("ПриИзменении",
    Новый Действие("ПометкаПриИзменении"));
```

---

## 4. Декорации

```1c
// Надпись
Lbl = Элементы.Добавить("ЗаголовокТовара", Тип("ДекорацияФормы"), PgТовары);
Lbl.Вид       = ВидДекорацииФормы.Надпись;
Lbl.Заголовок = "Глобус";

// Картинка
Pic = Элементы.Добавить("КартинкаТовара", Тип("ДекорацияФормы"), PgТовары);
Pic.Вид            = ВидДекорацииФормы.Картинка;
Pic.Картинка       = БиблиотекаКартинок.ГеографическаяСхема;
Pic.РазмерКартинки = РазмерКартинки.Растянуть;
Pic.Ширина         = 20;
Pic.Высота         = 8;
```

---

## 5. Команды и кнопки

```1c
// Команда
Cmd = Команды.Добавить("МоеДействие");
Cmd.Заголовок = "Мое действие";
Cmd.Действие  = "МоеДействие";   // &НаКлиенте процедура формы с параметром Команда

// Кнопка-меню внутри подменю
Btn = Элементы.Добавить("BtnМое", Тип("КнопкаФормы"), ГруппаПодменю);
Btn.Заголовок  = "Мое действие";
Btn.ИмяКоманды = "МоеДействие";
```

---

## 6. Таблица формы

```1c
Tbl = Элементы.Добавить("ТаблТовары", Тип("ТаблицаФормы"), ЭтотОбъект);
Tbl.ПутьКДанным = "Объект.Товары";

// Колонка ввода (Номенклатура)
ColNom = Элементы.Добавить("Товар_Номенклатура", Тип("ПолеФормы"), Tbl);
ColNom.Вид         = ВидПоляФормы.ПолеВвода;
ColNom.ПутьКДанным = "Объект.Товары.Номенклатура";

// Колонка-флажок
ColUse = Элементы.Добавить("Товар_Используется", Тип("ПолеФормы"), Tbl);
ColUse.Вид         = ВидПоляФормы.ПолеФлажка;
ColUse.ПутьКДанным = "Объект.Товары.Используется";
```

---

## 7. Динамическое добавление реквизитов формы

```1c
Рекв = Новый Массив;

// Строка 500 символов
Рекв.Добавить(
    Новый РеквизитФормы("Комментарий",
        Новый ОписаниеТипов("Строка", , Новый КвалификаторыСтроки(500))));

// Число 10 знаков
Рекв.Добавить(
    Новый РеквизитФормы("Номер",
        Новый ОписаниеТипов("Число", Новый КвалификаторыЧисла(10,0))));

// Дата-время
Рекв.Добавить(
    Новый РеквизитФормы("Дата",
        Новый ОписаниеТипов("Дата", , ,
            Новый КвалификаторыДаты(ЧастиДаты.ДатаВремя))));

// Булево
Рекв.Добавить(
    Новый РеквизитФормы("ПометкаУдаления",
        Новый ОписаниеТипов("Булево")));

// Ссылка на справочник
Рекв.Добавить(
    Новый РеквизитФормы("Контрагент",
        Новый ОписаниеТипов("СправочникСсылка.Контрагенты")));

ИзменитьРеквизиты(Рекв);   // применяем
```

---
